# SDK Authentication and Error Handling Updates (April 14, 2025)

## Summary

This document summarizes the recent updates to the `@crosspost/sdk` package, focusing on simplified authentication strategy and error handling improvements.

## Key Decisions & Implementation

1.  **Authentication Strategy:**
    *   The SDK now uses a single, direct authentication method:
        *   Each request requires fresh `NearAuthData` with a new signature
        *   No persistent authentication state is stored
        *   Authentication data is provided explicitly for each request
    *   The `client.setAuthentication(nearAuthData)` method is used to set the current authentication data
    *   The client constructor no longer accepts authentication data, as it should be provided fresh for each request

2.  **Security Benefits:**
    *   Enhanced security through per-request signatures
    *   No persistent authentication state in browser
    *   Each action requires explicit authorization
    *   Reduced attack surface by eliminating cookie-based vulnerabilities

3.  **Error Handling:**
    *   The SDK client uses `ApiError.unauthorized` thrown from `makeRequest` when authentication is required but missing
    *   Error handling utilities (`handleErrorResponse`, `createNetworkError`) have been refined for clarity

## Documentation Updates

*   The following memory bank files have been updated to reflect these changes:
    *   `memory-bank/sdk-architecture.md`
    *   `memory-bank/security-plan.md`
    *   `memory-bank/activeContext.md`
    *   `memory-bank/progress.md`
*   The SDK README (`packages/sdk/README.md`) has been updated with the new authentication approach and API reference details.
